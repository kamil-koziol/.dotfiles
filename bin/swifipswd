CURRENT_WIFI=`/Sy*/L*/Priv*/Apple8*/V*/C*/R*/airport -I | awk '/ SSID:/ {print $2}'`

while getopts "n:" arg; do
  case $arg in
    n)
      CURRENT_WIFI=$OPTARG;;
  esac
done

security find-generic-password -ga "$CURRENT_WIFI" | grep "password:"
